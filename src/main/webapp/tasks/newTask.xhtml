<?xml version="1.0" encoding="UTF-8" ?>
<!--
	newTasks.xhtml
	View displaying all available tasks.
 -->
<f:view xmlns="http://www.w3.org/1999/xhtml"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui">
	<f:metadata>
		<f:event type="preRenderView" listener="#{taskEditor.onPreRenderView}" />
	</f:metadata>
	<ui:composition template="/resources/jeetrain/layouts/master.xhtml">
		<ui:define name="pageTitle">JEETrain: New Task</ui:define>
		<ui:define name="content">
			<p:panel id="newTaskPanel" header="New Task">
				<h:form id="newTaskForm" >
					<p:messages />
					<fieldset>
						<legend>General</legend>
						<h:panelGrid columns="2" >
							<p:outputLabel for="subject" value="Subject" />
							<p:inputText id="subject" value="#{taskEditor.task.subject}" />
							<p:outputLabel for="description" value="Description" />
							<p:inputTextarea id="description" value="#{taskEditor.task.description}" />
							<p:outputLabel for="category" value="Category" />
							<p:selectOneMenu id="category" value="#{taskEditor.task.category}" >
								<f:selectItems value="#{taskEditor.taskCategories}" />
							</p:selectOneMenu>
							<p:outputLabel for="priority" value="Priority" />
							<p:selectOneMenu id="priority" value="#{taskEditor.task.priority}" >
								<f:selectItems value="#{taskEditor.taskPriorities}" />
							</p:selectOneMenu>
							<p:outputLabel for="dueDate" value="Due date" />
							<p:calendar id="dueDate" value="#{taskEditor.task.dueDate}" showButtonPanel="true" mode="popup" showOn="button" popupIconOnly="true"/>
						</h:panelGrid>
					</fieldset>
					<fieldset>
						<legend>Lifecycle</legend>
						<h:panelGrid columns="2">
							<h:outputLabel for="lifeCycleState" value="Status" />
							<h:outputText id="lifeCycleState" value="#{taskEditor.task.lifeCycleState}" />
						</h:panelGrid>
					</fieldset>
					<fieldset><legend>Affected components</legend> 
						<h:panelGrid columns="2">
							<p:outputLabel for="project" value="Project" />
							<p:inputText id="project" value="#{taskEditor.task.affectedProjectId}" />
							<p:outputLabel for="application" value="Application" />
							<p:inputText id="application" value="#{taskEditor.task.affectedApplicationId}" />
							<p:outputLabel for="module" value="Module" />
							<p:inputText id="module" value="#{taskEditor.task.affectedModule}" />
						</h:panelGrid>
					</fieldset>
					<div>
						<p:commandButton id="newTask" value="OK" action="#{taskEditor.newTask}" ajax="false" />
						<p:commandButton id="closeView" value="Cancel" action="#{taskEditor.closeView}" ajax="false" immediate="true" />
					</div>
				</h:form>
			</p:panel>
		</ui:define>
	</ui:composition>
</f:view>
